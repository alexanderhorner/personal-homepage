{"mappings":"AA+BA,GAAG,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAM;AACxC,GAAG,CAAC,UAAU,GAAG,CAAE;AACnB,GAAG,CAAC,QAAQ,GAAG,IAAI;AAEnB,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,cAAc;SAEnB,qBAAqB,GAAG,CAAC;IAC9B,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,GAAK,CAAC;QACrC,UAAU,CAAC,UAAU,CAAC,KAAK,WAAa,CAAC;YACrC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,OAAO,CAAC,CAA0C,2CAAE,CAAC;gBAAA,MAAM,EAAE,CAAO;YAAA,CAAC;YAC/G,OAAO,CAAC,KAAK;QACjB,CAAC;IACL,CAAC;AACL,CAAC;AAED,IAAI,CAAC,gBAAgB,CAAC,CAAQ,gBAAS,CAAC,GAAK,CAAC;IAC1C,CAAC,CAAC,cAAc;IAEhB,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAI;IAE5B,EAAa,AAAb,WAAa;IACb,QAAQ,CAAC,aAAa,CAAC,CAAS,UAAE,QAAQ,GAAG,IAAI;IAEjD,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,qBAAqB;IACzC,OAAO,CAAC,GAAG,CAAC,KAAK;IAGjB,QAAQ,CAAC,MAAM,CAAC,CAAoB,qBAAE,KAAK;IAE3C,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,CAAQ;IAEvC,KAAK,CAAC,UAAU,EAAE,CAAC;QACf,MAAM,EAAE,CAAM;QACd,IAAI,EAAE,QAAQ;IAClB,CAAC,EAAE,IAAI,EAAC,QAAQ,GAAI,CAAC;QACb,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAG,KAC1C,KAAK,CAAC,CAA6B;QAEvC,MAAM,CAAC,QAAQ;IACnB,CAAC,EAAE,IAAI,QAAO,QAAQ,GAAI,CAAC;QACvB,GAAG,CAAC,YAAY,GAA0B,KAAK,CAAC,QAAQ,CAAC,IAAI;QAC7D,OAAO,CAAC,GAAG,CAAC,YAAY;QACxB,EAAE,EAAE,YAAY,CAAC,WAAW,CAAC,MAAM,IAAI,GAAG,EACtC,KAAK,CAAC,CAAwC;QAElD,MAAM,CAAC,QAAQ;IACnB,CAAC,EAAE,IAAI,EAAC,QAAQ,GAAI,CAAC;QACjB,EAAa,AAAb,WAAa;QACb,QAAQ,CAAC,aAAa,CAAC,CAAU,WAAE,KAAK,CAAC,OAAO,GAAG,CAAO;QAC1D,EAAa,AAAb,WAAa;QACb,QAAQ,CAAC,aAAa,CAAC,CAAM,OAAE,KAAK,CAAC,OAAO,GAAG,CAAM;QACrD,EAAa,AAAb,WAAa;QACb,QAAQ,CAAC,aAAa,CAAC,CAAQ,SAAE,KAAK,CAAC,OAAO,GAAG,CAAM;IAC3D,CAAC,EAAE,KAAK,EAAC,KAAK,GAAI,CAAC;QACf,OAAO,CAAC,KAAK,EAAE,mBAAmB,EAAE,KAAK;QACzC,EAAa,AAAb,WAAa;QACb,QAAQ,CAAC,aAAa,CAAC,CAAQ,SAAE,KAAK,CAAC,OAAO,GAAG,CAAO;QACxD,EAAa,AAAb,WAAa;QACb,QAAQ,CAAC,aAAa,CAAC,CAAS,UAAE,QAAQ,GAAG,KAAK;IACtD,CAAC;AACT,CAAC","sources":["src/js/form.ts"],"sourcesContent":["interface SubmitFunctionResponse {\n    input:       Input;\n    APIResponse: APIResponse;\n}\n\ninterface APIResponse {\n    webSocket:  null;\n    url:        string;\n    redirected: boolean;\n    ok:         boolean;\n    headers:    Headers;\n    statusText: string;\n    status:     number;\n    bodyUsed:   boolean;\n    body:       Body;\n}\n\ninterface Body {\n    locked: boolean;\n}\n\ninterface Headers {\n}\n\ninterface Input {\n    name:    string;\n    email:   string;\n    message: string;\n}\n\n\nlet form = document.querySelector(\"form\")\nlet actionPath = \"\";\nlet formData = null;\n\nvar xhr = new XMLHttpRequest();\n\nfunction getGoogleCaptchaToken() { \n    return new Promise((resolve, reject) => {\n        grecaptcha.enterprise.ready(async () => {\n            const token = await grecaptcha.enterprise.execute('6LeyVLEfAAAAACOQ-LvNhzgJf94CsQfG9ltauUxV', {action: 'LOGIN'});\n            resolve(token)\n        })\n    })\n}\n\nform.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    \n    formData = new FormData(form)\n\n    // @ts-ignore\n    document.querySelector(\".submit\").disabled = true;\n\n    const token = await getGoogleCaptchaToken()\n    console.log(token);\n    \n\n    formData.append('googlecaptchaToken', token)\n\n    actionPath = form.getAttribute(\"action\")\n\n    fetch(actionPath, {\n        method: 'post',\n        body: formData,\n    }).then(response => {\n            if (!response.status.toString().startsWith(\"2\")) {\n                throw 'HTTP Status code is not 2xx'\n            }\n            return response\n        }).then(async response => {\n            let jsonResponse:SubmitFunctionResponse = await response.json()\n            console.log(jsonResponse)\n            if (jsonResponse.APIResponse.status != 202) {\n                throw 'E-Mail send api status code is not 202'\n            }\n            return response\n        }).then(response => {\n            // @ts-ignore\n            document.querySelector(\".success\").style.display = \"block\"\n            // @ts-ignore\n            document.querySelector(\"form\").style.display = \"none\"\n            // @ts-ignore\n            document.querySelector(\".error\").style.display = \"none\"\n        }).catch(error => {\n            console.error(`E-Mail Form Error: ${error}`);\n            // @ts-ignore\n            document.querySelector(\".error\").style.display = \"block\"\n            // @ts-ignore\n            document.querySelector(\".submit\").disabled = false;\n        });\n});\n"],"names":[],"version":3,"file":"index.61db7c5a.js.map","sourceRoot":"/__parcel_source_root/"}